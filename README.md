<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# database

```go
import "github.com/gokutils/database"
```

## Index

- [type DB](<#DB>)
- [type DatabaseInterface](<#DatabaseInterface>)
- [type LockerDB](<#LockerDB>)
  - [func NewLockerDB\(db \*sql.DB, driver string\) \*LockerDB](<#NewLockerDB>)
  - [func \(l \*LockerDB\) Begin\(\) \(\*sql.Tx, error\)](<#LockerDB.Begin>)
  - [func \(l \*LockerDB\) BeginTx\(ctx context.Context, sopts \*sql.TxOptions\) \(\*sql.Tx, error\)](<#LockerDB.BeginTx>)
  - [func \(l \*LockerDB\) Close\(\)](<#LockerDB.Close>)
  - [func \(l \*LockerDB\) Commit\(ctx context.Context\) error](<#LockerDB.Commit>)
  - [func \(l \*LockerDB\) Driver\(\) string](<#LockerDB.Driver>)
  - [func \(r \*LockerDB\) ExecContext\(ctx context.Context, sql string, args ...interface\{\}\) error](<#LockerDB.ExecContext>)
  - [func \(l \*LockerDB\) GetDB\(\) \*sql.DB](<#LockerDB.GetDB>)
  - [func \(l \*LockerDB\) GetDatabaseAndUnLocker\(ctx context.Context\) \(DatabaseInterface, func\(\)\)](<#LockerDB.GetDatabaseAndUnLocker>)
  - [func \(l \*LockerDB\) GetDatabaseLocked\(ctx context.Context, fn func\(db DatabaseInterface\) error\) error](<#LockerDB.GetDatabaseLocked>)
  - [func \(l \*LockerDB\) GetQueryerAndUnLocker\(ctx context.Context\) \(Queryer, func\(\)\)](<#LockerDB.GetQueryerAndUnLocker>)
  - [func \(l \*LockerDB\) GetQueryerLocked\(ctx context.Context, fn func\(Queryer\) error\) error](<#LockerDB.GetQueryerLocked>)
  - [func \(r \*LockerDB\) QueryContext\(ctx context.Context, scanner Scanner, sql string, args ...interface\{\}\) error](<#LockerDB.QueryContext>)
  - [func \(r \*LockerDB\) QueryRowContext\(ctx context.Context, scanner Scanner, sql string, args ...interface\{\}\) error](<#LockerDB.QueryRowContext>)
  - [func \(l \*LockerDB\) Rollback\(ctx context.Context\) error](<#LockerDB.Rollback>)
- [type NoOpBeginDb](<#NoOpBeginDb>)
  - [func \(l NoOpBeginDb\) Begin\(\) \(\*sql.Tx, error\)](<#NoOpBeginDb.Begin>)
  - [func \(l NoOpBeginDb\) BeginTx\(ctx context.Context, sopts \*sql.TxOptions\) \(\*sql.Tx, error\)](<#NoOpBeginDb.BeginTx>)
- [type QueryExecutor](<#QueryExecutor>)
- [type Queryer](<#Queryer>)
- [type Scan](<#Scan>)
- [type Scanner](<#Scanner>)


<a name="DB"></a>
## type DB



```go
type DB interface {
    QueryExecutor
    GetQueryerAndUnLocker(ctx context.Context) (Queryer, func())
    GetQueryerLocked(ctx context.Context, fn func(Queryer) error) error
    GetDatabaseLocked(ctx context.Context, fn func(db DatabaseInterface) error)
}
```

<a name="DatabaseInterface"></a>
## type DatabaseInterface



```go
type DatabaseInterface interface {
    Queryer
    BeginTx(ctx context.Context, sopts *sql.TxOptions) (*sql.Tx, error)
    Begin() (*sql.Tx, error)
}
```

<a name="LockerDB"></a>
## type LockerDB



```go
type LockerDB struct {
    // contains filtered or unexported fields
}
```

<a name="NewLockerDB"></a>
### func NewLockerDB

```go
func NewLockerDB(db *sql.DB, driver string) *LockerDB
```



<a name="LockerDB.Begin"></a>
### func \(\*LockerDB\) Begin

```go
func (l *LockerDB) Begin() (*sql.Tx, error)
```



<a name="LockerDB.BeginTx"></a>
### func \(\*LockerDB\) BeginTx

```go
func (l *LockerDB) BeginTx(ctx context.Context, sopts *sql.TxOptions) (*sql.Tx, error)
```



<a name="LockerDB.Close"></a>
### func \(\*LockerDB\) Close

```go
func (l *LockerDB) Close()
```



<a name="LockerDB.Commit"></a>
### func \(\*LockerDB\) Commit

```go
func (l *LockerDB) Commit(ctx context.Context) error
```



<a name="LockerDB.Driver"></a>
### func \(\*LockerDB\) Driver

```go
func (l *LockerDB) Driver() string
```



<a name="LockerDB.ExecContext"></a>
### func \(\*LockerDB\) ExecContext

```go
func (r *LockerDB) ExecContext(ctx context.Context, sql string, args ...interface{}) error
```



<a name="LockerDB.GetDB"></a>
### func \(\*LockerDB\) GetDB

```go
func (l *LockerDB) GetDB() *sql.DB
```



<a name="LockerDB.GetDatabaseAndUnLocker"></a>
### func \(\*LockerDB\) GetDatabaseAndUnLocker

```go
func (l *LockerDB) GetDatabaseAndUnLocker(ctx context.Context) (DatabaseInterface, func())
```



<a name="LockerDB.GetDatabaseLocked"></a>
### func \(\*LockerDB\) GetDatabaseLocked

```go
func (l *LockerDB) GetDatabaseLocked(ctx context.Context, fn func(db DatabaseInterface) error) error
```

Ces fonction son la pour permetre d'utiliser les tx en multi thread la db n'a pas se soucie la car ces un pool

<a name="LockerDB.GetQueryerAndUnLocker"></a>
### func \(\*LockerDB\) GetQueryerAndUnLocker

```go
func (l *LockerDB) GetQueryerAndUnLocker(ctx context.Context) (Queryer, func())
```



<a name="LockerDB.GetQueryerLocked"></a>
### func \(\*LockerDB\) GetQueryerLocked

```go
func (l *LockerDB) GetQueryerLocked(ctx context.Context, fn func(Queryer) error) error
```



<a name="LockerDB.QueryContext"></a>
### func \(\*LockerDB\) QueryContext

```go
func (r *LockerDB) QueryContext(ctx context.Context, scanner Scanner, sql string, args ...interface{}) error
```



<a name="LockerDB.QueryRowContext"></a>
### func \(\*LockerDB\) QueryRowContext

```go
func (r *LockerDB) QueryRowContext(ctx context.Context, scanner Scanner, sql string, args ...interface{}) error
```



<a name="LockerDB.Rollback"></a>
### func \(\*LockerDB\) Rollback

```go
func (l *LockerDB) Rollback(ctx context.Context) error
```



<a name="NoOpBeginDb"></a>
## type NoOpBeginDb



```go
type NoOpBeginDb struct {
    *sql.Tx
}
```

<a name="NoOpBeginDb.Begin"></a>
### func \(NoOpBeginDb\) Begin

```go
func (l NoOpBeginDb) Begin() (*sql.Tx, error)
```



<a name="NoOpBeginDb.BeginTx"></a>
### func \(NoOpBeginDb\) BeginTx

```go
func (l NoOpBeginDb) BeginTx(ctx context.Context, sopts *sql.TxOptions) (*sql.Tx, error)
```



<a name="QueryExecutor"></a>
## type QueryExecutor



```go
type QueryExecutor interface {
    ExecContext(ctx context.Context, scanner Scanner, sql string) error
    QueryRowContext(ctx context.Context, scanner Scanner, sql string, args ...interface{}) error
    QueryContext(ctx context.Context, scanner Scanner, sql string, args ...interface{}) error
}
```

<a name="Queryer"></a>
## type Queryer



```go
type Queryer interface {
    PrepareContext(ctx context.Context, query string) (*sql.Stmt, error)
    ExecContext(ctx context.Context, query string, args ...interface{}) (sql.Result, error)
    QueryContext(ctx context.Context, query string, args ...interface{}) (*sql.Rows, error)
    QueryRowContext(ctx context.Context, query string, args ...interface{}) *sql.Row
}
```

<a name="Scan"></a>
## type Scan



```go
type Scan interface {
    Scan(v ...interface{}) error
}
```

<a name="Scanner"></a>
## type Scanner



```go
type Scanner func(row Scan) error
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
